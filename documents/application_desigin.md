# 要件整理

- あらかじめ作成済みユーザでログインができる
- ユーザ登録ができる
  - 登録後はログイン画面へリダイレクト？それともログイン済みホームにリダイレクト？
  - ログイン済みにしてタイムラインにリダイレクト
- タイムラインにメッセージ書き込みができる
- メッセージにいいねができる
- テストについて考える
  - E2E: 候補として Playwright(使ったことがある...少し。)
- 開発環境は Docker
  - DevContainer?
  - JetBrains Gateway?
    やるなら PhpStorm 覚えていきたい
- AWS にデプロイ
  - 予算は？
  - CloudFront + S3 + ECS(EKS) + RDS?
  - WAF?
- API は REST っぽい？
  - きちんとスキーマを書いていきたい

## ユーザができることは？

- ユーザデータ

  - ユーザー作成
    - 必要な情報は？
      - メールアドレス
      - パスワード
      - ユーザー名
      - ユーザー独自の ID(変更不可, 自動生成)
    - 他にユーザーが登録できる機能は？
      - プロフィール等は必要なし
    - 識別子/パスワードに利用できる文字列は？
      - 識別子は自動生成の ID
      - パスワードに使用字(下の通りに加えて大文字小文字数字)
      - ! " # $ % ' ( ) \* , . / : ; < = > ? @ [ ] ^ \_ ` { | } ~
      - パスワードの文字の組み合わせに制限はない
      - パスワードの長さは最低数は 8, 最長で 32 文字
  - ログイン
    - 識別に使うのはメールアドレス
    - 上手く行った時に使うのは セッションでいいかも
    - ログアウト（自動ログアウトはある？）
      - 2 時間何もなければ自動ログアウト
  - 削除は必要？必要場合論理削除？物理削除？
    - 不要
  - ユーザ情報はユーザ自身で変更はできる？できるとしたらどの項目？ - メールアドレス - パスワード - ユーザー名
  - follow の概念はある？
    - ない

- メッセージ

  - ここでのメッセージの定義は、TL に流れるもの。ツイートとかトゥートとかノートとかそういう概念
  - 利用可能文字列、最大文字数は？
    - 利用不可の文字は存在しない
    - 日本語で 140 文字
  - 画像は添付できる？何件まで？
    なし
  - メンション機能はある？
    - リプも含めてなし
  - 書き込み/閲覧はログイン済みだけ
  - メッセージは TL 上でのみ表示され、個別のページは存在しない
  - 公開範囲の概念はある？（例えば followers only みたいな
    - なし
  - あとからの編集はできる？
    - なし
  - 後からの削除はできる？論理削除？物理削除？
    - なし
  - 1 回のフェッチで何件取得？
    - 10 件
  - いいねした人(Many)、されたメッセージ(One)
    - いいねは取り消しができないし、多重にお気に入りすることはできない
  - いいねの数はカウントする
  - リポストの概念はある？
    - なし
  - リプライのようなシステムは必要？(メッセージ間のリレーション)
    - なし
  - お気に入りされたことを知る方法は？通知？
    - なし
  - 誰からお気に入りされたかを確認できる？
    - なし
  - 投稿時刻、各メッセージの右上に表示される
    - yyyy/mm/dd hh:mm:ss(0pad しない, 24h)
  - 表示関係
    - ユーザ名、本文、時刻、いいね数
    - 投稿日時の降順
    - 無限スクロールの区切りとしてメッセージ ID を持たせておく

- その他
  - 他に登場しうる概念は？
  - ユーザプロフィール？
    - なし

## 開発

- Github flow(main, topic/hoge)
- そもそも開発はバックエンド先行っぽい
- モノレポ
- バリデーションはどこでやるの？
  - 何に対してバリデーションかけるの？
    - メールアドレス
    - パスワード
    - ポストするメッセージ
  - 引っかかった時のメッセージは？
  - バリデーションはどっちもかも
    - サーバは必須、フロントでは余裕があれば
- サーバサイド
  - PHP/Laravel
    - seeder にユーザーは登録する必要がありそう、あとは指定なし
- フロントエンド
  - TypeScript/React(Vite/SPA), MUI
- テスト
  - Lint
  - ビルドテスト
  - PHP でよく使うテストツールは？
    - 動かし方覚えたら Actions に仕込む + PASS しないと main に行かないように
    - テストケースは要件固まってから考えるがバックエンドは API 一通りとユーティリティ関数？
  - E2E
    - 本題ではなさそうなのでカロリーを抑えたい

## デプロイ

- 時間があったら IaC 頑張りたい
  - tf のモジュール化とか覚えてみたい
- 無理そうならぽちぽち

## 別の視点から

1. 新規登録
2. ログイン済ホーム(TL 表示)
3. post
4. ログアウト
